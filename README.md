# Spotify MFE App

<table>
  <thead>
    <tr>
      <th rowspan="2">Overall</th>
      <th>MFE</th>
      <th colspan="2">Libs</th>
    </tr>
    <tr>
      <th>Shell</th>
      <th>api-client</th>
      <th>auth-utils</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <img src="https://codecov.io/gh/matiushariman/spotify-mfe-app/branch/main/graph/badge.svg" alt="overall coverage" />
      </td>
      <td align="center">
        <img src="https://codecov.io/gh/matiushariman/spotify-mfe-app/branch/main/graph/badge.svg?flag=shell" alt="shell coverage" />
      </td>
      <td align="center">
        <img src="https://codecov.io/gh/matiushariman/spotify-mfe-app/branch/main/graph/badge.svg?flag=api-client" alt="api client coverage" />
      </td>
      <td align="center">
        <img src="https://codecov.io/gh/matiushariman/spotify-mfe-app/branch/main/graph/badge.svg?flag=auth-utils" alt="auth utils coverage" />
      </td>
    </tr>
  </tbody>
</table>

## Pre-requisites

- Register your application at [Spotify Dashboard](https://developer.spotify.com/dashboard/) to get your clientId (`NX_SPOTIFY_CLIENT_ID`).
- Upon successful registration, configure your application's callback URL (`NX_SPOTIFY_REDIRECT_URI`) to `http://locahost:4200/callback/`.

## Setting up your development environment

Run the commands below to setup the app for development purpose

```shell
# clone the repository
git clone https://github.com/matiushariman/spotify-app.git

# Install dependencies
yarn install
```

Create a `.local.env` file inside `apps/shell` and add the variables below

```shell
# .local.env

# required - see pre-requisites to learn more about getting your clientId
NX_SPOTIFY_CLIENT_ID=[YOUR_SPOTIFY_APP_CLIENT_ID]

# optional - set to http://localhost:4200/callback/ by default
NX_SPOTIFY_REDIRECT_URI=[YOUR_SPOTIFY_APP_REDIRECT_URI]
```

## Running the application(s)

- To run the shell (`host`) application, use `yarn start` command.
  - Running this command will allow shell (`host`) to start in development mode and the remaining microfrontend (`remote`) applications to run in production mode.
- To run the other microfrontend (`remote`) application(s) in development mode, use `yarn start --devRemotes=[mfe-app-name]`
- Learn more about MFE architecture with NX [here](https://nx.dev/more-concepts/micro-frontend-architecture).

## Understand this workspace

Run `nx graph` to see a diagram of the dependencies of the projects.

## Further help

✨ **This workspace has been generated by [Nx, a Smart, fast and extensible build system.](https://nx.dev)** ✨

Visit the [Nx Documentation](https://nx.dev) to learn more.
